--- ./tools/osx/start	2012-08-28 20:26:34.000000000 +0900
+++ ./tools/osx.diff/start	2012-08-28 03:59:36.000000000 +0900
@@ -2,18 +2,24 @@
 
 CWD=`dirname "$0"`
 echo $CWD
+cd "${CWD}/../.."
+APPDIR=`pwd`
+cd - > /dev/null
+LNDIR=/tmp/RawTherapee.app
 
 export DYLD_LIBRARY_PATH="${CWD}/lib:$DYLD_LIBRARY_PATH"
 export GTK_DATA_PREFIX="${CWD}"
 export GTK_DATA_DIRS="${CWD}"
 export GTK_EXE_PREFIX="${CWD}"
 export GTK_PATH="${CWD}"
+export XDG_DATA_DIRS="${CWD}/share"
 
 export GTK2_RC_FILES="${CWD}/etc/gtk-2.0/gtkrc"
-export GTK_IM_MODULE_FILE="${CWD}/gtk-2.0/gtk.immodules"
+export GTK_IM_MODULE_FILE="${CWD}/etc/gtk-2.0/gtk.immodules"
 export GDK_PIXBUF_MODULE_FILE="${CWD}/etc/gtk-2.0/gdk-pixbuf.loaders"
 export PANGO_RC_FILE="${CWD}/etc/pango/pangorc"
 
-cp "${CWD}/etc/pango/pango.modules" /tmp/rawtherapee_pango.modules
+rm -f "${LNDIR}"
+ln -s "${APPDIR}" "${LNDIR}"
 
 "${CWD}/rawtherapee"
